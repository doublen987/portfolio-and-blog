<%: func HandleEditKnowledgeTimeline(settings models.Settings, timeline []models.TimelineEvent, w io.Writer)%>
<%~ "index.html" %>
<%@ body { %>
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="/content/js/he.js"></script>
    <script src="/content/js/editknowledgetimeline.js"></script>

    <div class="editor-container">
        <form id="form1" action="/knowledgetimeline/edit" enctype="multipart/form-data" method="POST">
            <div class="input-container">
                <label for="SelectedEvent" class="editor-label">Choose an event:</label>
                <select name="SelectedEvent" id="chosen-event" class="editor-select">
                    <option value="None">New event</option>
                    <% for _, event := range timeline { %>
                        <option value="<%=s event.ID %>"><%=s event.Title %></option>
                        
                    <% } %>
                </select>
                <% for _, event := range timeline { %>
                    <div id="title-<%=s event.ID %>" style="display:none;"><%=s event.Title %></div>
                    <div id="description-<%=s event.ID %>" style="display:none;"><%=s event.Description %></div>
                <% } %>
            </div>
            <div class="input-container">
                <label for="event-title" class="editor-label">Title: </label>
                <input name="Title" id="event-title" class="editor-input"></input>
            </div>
            <div class="input-container">
                <label for="event-description" class="editor-label">Description: </label>
                <input name="Description" id="event-description" class="editor-input"></input>
            </div>
            <div class="input-container">
                <label for="event-image" class="editor-label">Image: </label>
                <input name="Image" type="file" accept="image/*" id="event-image"></input>
            </div>
            <div class="submit-container">
                <button class="submit-btn" type="submit" name="Send" value="POST">Post</button>
                <button class="submit-btn" type="submit" name="Send" value="DELETE">Delete</button>
            </div>
        </form>
    </div>

    <script>
        InitializeEventEditor();
    </script>
    
<% } %>