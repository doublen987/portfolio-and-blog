<%: func HandleEditProject(projects []models.Project, w io.Writer)%>
<%~ "index.html" %>
<%@ body { %>
    <div class="editor-container">
        <form id="form1" action="/projects/edit" enctype="multipart/form-data" method="POST">
            <div class="input-container">
                <label for="SelectedProject" class="editor-label">Choose a project:</label>
                <select name="SelectedProject" id="chosen-post"  class="editor-select">
                    <option value="None">New project</option>
                    <% for _, project := range projects { %>
                        <option value="<%=s project.ID %>"><%=s project.Title %></option>
                        
                    <% } %>
                </select>
                <% for _, project := range projects { %>
                    <div id="title-<%=s project.ID %>" style="display:none;"><%=s project.Title %></div>
                    <div id="description-<%=s project.ID %>" style="display:none;"><%=s project.Description %></div>
                    <div id="link-<%=s project.ID %>" style="display:none;"><%=s project.Link %></div>
                <% } %>
            </div>
            <div class="input-container">
                <label for="post-title" class="editor-label">Title: </label>
                <input name="Title" id="post-title"  class="editor-input"></input>
            </div>
            <div class="input-container">
                <label for="post-description" class="editor-label">Description: </label>
                <input name="Description" id="post-description" class="editor-input"></input>
            </div>
            <div class="input-container">
                <label for="post-link" class="editor-label">Link: </label>
                <input name="Link" id="post-link" class="editor-input"></input>
            </div>
            <div class="input-container">
                <label for="post-thumbnail" class="editor-label">Thumbnail: </label>
                <input name="Thumbnail" type="file" accept="image/*" id="post-thumbnail" ></input>
            </div>
            <div class="submit-container">
                <button class="submit-btn" type="submit" name="Send" value="POST">Post</button>
                <button class="submit-btn" type="submit" name="Send" value="DELETE">Delete</button>
            </div>
        </form>
    </div>
    
    <script>
        var select = document.getElementById("chosen-post");
        select.addEventListener("change", () => {
            if(select.value == "None") {
                document.getElementById("post-title").value = "";
                document.getElementById("post-description").value = "";
                document.getElementById("post-link").value = "";
                return
            }
            var description = document.getElementById("description-" + select.value).innerHTML;
            var title = document.getElementById("title-" + select.value).innerHTML;
            var link = document.getElementById("link-" + select.value).innerHTML;
            document.getElementById("post-description").value = description;
            document.getElementById("post-title").value = title;
            document.getElementById("post-link").value = link;
        })
    </script>

<% } %>